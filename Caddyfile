# Enable automatic HTTPS
{
	email aswarthedoctor@gmail.com
	frankenphp
}

antarkanmaa.my.id {
	# Set the webroot to the public/ directory
	root * public/
	# Enable compression
	encode zstd br gzip
	# Execute PHP files and serve assets
	php_server
	file_server

	# Enable HTTPS with automatic certificate management
	tls {
		protocols tls1.2 tls1.3
	}

	# Security headers
	header {
		# Enable HTTP Strict Transport Security (HSTS)
		Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
		# Prevent clickjacking
		X-Frame-Options "SAMEORIGIN"
		# Enable XSS protection
		X-XSS-Protection "1; mode=block"
		# Prevent MIME type sniffing
		X-Content-Type-Options "nosniff"
		# Enable CSP
		Content-Security-Policy "upgrade-insecure-requests"
	}
}

# Redirect www to non-www
www.antarkanmaa.my.id {
	redir https://antarkanmaa.my.id{uri} permanent
}
